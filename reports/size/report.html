<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Size Reporting Dashboard</title>
    <link rel="stylesheet" href="report.css">
</head>
<body>
    <header class="page-header">
        <h1>Size Reporting Dashboard</h1>
        <p class="description">Compare artifact sizes between any two recorded commits and spot regressions quickly.</p>
    </header>

    <section class="controls">
        <label for="folder-select">Select folder</label>
        <select id="folder-select" aria-label="Size report folder"></select>
        <span id="generated-at" class="generated-at" aria-live="polite"></span>
    </section>

    <section class="summary" aria-labelledby="summary-title">
        <h2 id="summary-title">Commit Metadata</h2>
        <div class="summary-grid">
            <div>
                <h3>Commit 1</h3>
                <label class="summary-label" for="commit-base-select">Select commit 1</label>
                <select id="commit-base-select" class="summary-select" aria-label="Commit 1"></select>
                <p class="summary-value" id="commit-base-sha">—</p>
                <p class="summary-message" id="commit-base-message">—</p>
                <p class="summary-date" id="commit-base-date">—</p>
            </div>
            <div>
                <h3>Commit 2</h3>
                <label class="summary-label" for="commit-target-select">Select commit 2</label>
                <select id="commit-target-select" class="summary-select" aria-label="Commit 2"></select>
                <p class="summary-value" id="commit-target-sha">—</p>
                <p class="summary-message" id="commit-target-message">—</p>
                <p class="summary-date" id="commit-target-date">—</p>
            </div>
            <div>
                <h3>Alerts</h3>
                <p class="summary-value" id="alert-count">0</p>
                <p class="summary-message">Threshold: &gt;2% or &gt;25 KB</p>
            </div>
        </div>
    </section>

    <section class="table-section" aria-labelledby="table-title">
        <h2 id="table-title">Artifact Comparison</h2>
        <table id="artifact-table">
            <thead>
                <tr>
                    <th scope="col">File</th>
                    <th scope="col" id="commit-base-column">Commit 1 (bytes)</th>
                    <th scope="col" id="commit-target-column">Commit 2 (bytes)</th>
                    <th scope="col">Δ bytes</th>
                    <th scope="col">Δ %</th>
                    <th scope="col">Status</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
        <p id="empty-state" class="empty-state" hidden>No artifacts found for this folder.</p>
    </section>

    <section class="chart-section" aria-labelledby="chart-title">
        <h2 id="chart-title">Size Trend</h2>
        <canvas id="size-chart" width="960" height="420" role="img" aria-label="Bar chart comparing selected commits"></canvas>
    </section>

    <footer class="page-footer">
        <p>Data source: <code>reports/size/index.json</code>. Refresh via <code>python reports/size/update.py --input &lt;build-output&gt; --output &lt;folder&gt;</code>.</p>
    </footer>

    <script src="lib/chart.min.js"></script>
    <script src="dashboard.js" type="module"></script>
</body>
</html>
