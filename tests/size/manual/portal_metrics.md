# Manual Verification Checklist — Portal Metrics

## Scenario: Metrics Derived From Size Index

1. Run `scripts/build-portal-preview.sh --sandbox <path> --report reports/size --ci` to stage the portal locally.
2. Open `/tmp/portal-preview/index.html` in the browser.
3. Confirm the “Latest Metrics” card displays commit hash, generated timestamp, WASM delta, and microbench placeholders.
4. Refresh the page and verify the browser requests both `manifest.json` and `reports/size/index.json` (check DevTools network tab).
5. Inspect the metrics card after the network calls finish:
   - Commit hash matches `reports/size/sandbox/wasm/release/index.json` head entry.
   - WASM delta equals the difference between head and previous commit sizes for `nt_sandbox.wasm` (rounded to two decimals).
   - When no microbench metric exists, the field remains `—` with a warning state.
6. Temporarily corrupt `reports/size/index.json` (e.g., rename file) and reload; the metrics card must fall back to the warning message without throwing console errors.
7. Restore the JSON file after validation.

## Scenario: Manifest vs. Live Metrics Consistency

1. Ensure `web/portal/manifest.json` was generated by `scripts/portal/prepare-portal.js` in the current run.
2. Compare manifest metrics to the live card:
   - Commit hash matches manifest `commitHash` and report head entry.
   - Status message reads “Metrics derived from sandbox/wasm/release” once the size index loads.
3. Record discrepancies (delta mismatch, stale timestamp) in the release notes before approving deployment.
